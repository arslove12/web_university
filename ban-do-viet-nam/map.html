<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>B·∫£n ƒë·ªì Vi·ªát Nam</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    html, body { height: 100%; margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    #map { width: 100%; height: 100%; background-color: #FAF0E6; }
    .province-label {
      background-color: transparent;
      border: none;
      box-shadow: none;
      color: #5C4033; /* Dark Brown */
      font-family: 'Georgia', serif;
      font-size: 16px;
      font-weight: bold;
      text-align: center;
      white-space: nowrap;
      transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
      opacity: 0;
      transform: translateY(10px);
      pointer-events: none;
      text-shadow: -1px -1px 0 #FAF0E6, 1px -1px 0 #FAF0E6, -1px 1px 0 #FAF0E6, 1px 1px 0 #FAF0E6, -2px 0 3px rgba(0,0,0,0.2);
    }

    .province-label-visible {
      opacity: 1;
      transform: translateY(0);
    }

    #close-button {
      position: absolute;
      top: 20px;
      right: 20px;
      z-index: 1001;
      background: white;
      border: 2px solid rgba(0,0,0,0.2);
      border-radius: 4px;
      padding: 5px 10px;
      cursor: pointer;
      font-size: 16px;
    }

    .hidden {
      display: none;
    }

    .popup-page {
      display: none;
    }
    .popup-page.active {
      display: block;
    }
    

  </style>
</head>

<body>
    <!-- üî• Loading Animation -->
  <div id="loading-screen">
    <div class="loading-content">
      <div class="loader"></div>
      <p>ƒêang t·∫£i b·∫£n ƒë·ªì Vi·ªát Nam...</p>
    </div>
  </div>
    <header class="hero-bg border-b">
    <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
      <a href="../index1.html" class="flex items-center space-x-4">
        <div class="w-12 h-12 rounded-full  flex items-center justify-center text-white font-bold">
          <img src="../logo.png";base64,iVBORw0KGgoAAAANSUhEUgAAARMAAAC3CAMAAAAGjUrGAAAAflBMVEXaJR3//wDbMCnZEh7qmhTXAB7ZHR3ZGx3++APYCx721AzspBPbLhz99QTpkxX88gX54Qn32QvmgBflehfzxw7xvRDvtBHiZRnjbBj55AnywQ/wuBDhXhn77QbeRxvrnhTcOhzojBbnhhbkdBjgWBrurxHfThr0zA3fUxrcNxyPL/0XAAAEB0lEQVR4nO3d6XaiQBAFYHva6hYXXDJZjHvc4vu/4CgIsjQK6Bzt6vv9TnKg5LI0VbHRAAAAAAAAAAAAAAAAAAAAAAAAAICL7rM34PXQX3r2JrwatRRL9eyNeDGyKZry2RvxYmggBghPiuoKIboIT9IxOgLhSTtGRyA8GeLk2RvxUqQf0MRHeC5oGNRkiPBcKBHChScmV+earBCeCLXPNWkjPBEtIjhOzuRPXJMfFCVE+7gme4Qn5IkL79kb8xr0KFGTkX725ryERHQQnjMSSajJkX5L1eQN4TktTqdqgqXqRjY6CM+RXmdqskZ46DtTk28cKNnoIDwN/ZWryZfr4fHeczV5d/3+nlq5mrQcD4/+zJVEiE+3w+NNDDWZuB0eQ3RcD4+eGkoixNTl8Hgfxpp8uBwe6hlr0nM4PGpjLIkQG4Yvv5QshbYFNdlSuT9g0XlHrTvNMvx+QU36fqnf79j0DC3N585Hm1j1NohM96eP9mnZqVjr9u2duktbW3WUBMj/ryXxLTtIQt686BR6v/7c0ts6RfnFkcd4J3tvYCi7AP0YaytzE5HdwcMrMujad3JNUdR5cEk6FucmQhvTGkldrY3VuYlob397X0vaexbdzV9FP7f3tpQVi4Mk5C1nD6jIbGnpTYmZovufCj8YnFzTKP/Cr5ovRrmJSDW8oyLDhuU3JQWoWbskTXa5idCu3lNhb8cwNxGd6zYp45u43JSY0eh2DTJGjA+SkOyOK1VkfOB5ck1RhW8wTLZsT65pNDW//svrTdnnJpJpiS3mULOsd7saZ6wecK7R5a89zoxpUPn1FGfGNPItscUcqUlmEOM6R8Y0Sl91Thy58lSJjiPhyQ1iXGdTi0ltFR+NnRjTqBYdJ8JjGMS4zoExDcMgxnUOjGlUjY4D4TEOYgRM0wgB9mMaxkGMo/6Oitqa2I9pGAcxwmVoVXCV5j6mocyDGG/hbpP5SWjKe/nROIgxjhuPzG1NzMc0TIMYycYjY1sT7zENwyBGK7MMTdP8GYfjmEbMy73G2OdmK7TMLcNtOYeHspdbY+MRrTI/1WccHrVL7+usoBs619a04xseL30CnRS+41OUvrXr8A0PpT7+q93Q6bamGdvwqHliN281HslGsq1pzjU8MhGdxc1344oWifBwbS6guMui91smDPQb3+GNmYZHLaM9/FuyG1pfXnsw/UIAGWWhQuNR3Na04Bmec3SqNR7Jw5hxeNQh2LmqjUdRW9OBY3iCf+tfZ/41nMtl+YUAp3/r39Z11laDuVyOXwhw+kaM2vOvp7lcht+mIRetO+ZfvXmL4ZVH+t49H7TyfIavNO79mBmWBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7PYHsv4Bfwktl+d1EYQAAAAASUVORK5CYII=></div>
        <div class="flex-grow">
          <h1 class="text-xl md:text-2xl font-extrabold">Thu·ªëc L√†o Vi·ªát Nam</h1>
          <p class="text-xs md:text-sm text-gray-600">L·ªãch s·ª≠ ‚Äî T·∫≠p qu√°n ‚Äî Ngh·ªá thu·∫≠t</p>
        </div>
      </a>
      <div class="flex items-center space-x-2">
        <nav class=" md:flex space-x-4 text-sm">
            <a href="../index1.html" class="hover:underline">Trang ch·ªß</a>
            <a href="../lich_su_chi_tiet.html" class="hover:underline">L·ªãch s·ª≠</a>
            <a href="./map.html" class="hover:underline">B·∫£n ƒë·ªì</a>
            <a href="../van_hoa.html" class="hover:underline">VƒÉn h√≥a</a>
        </nav>


          </button>
          <!-- Mobile Menu Buttons -->
        <div class="md:hidden">
            <button id="mobile-menu-button" class="p-2 rounded-md text-gray-800 hover:bg-gray-200">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
            <button id="mobile-menu-close-button" class="hidden p-2 rounded-md text-gray-800 hover:bg-gray-200">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
        </div>
      </div>
    </div>
  </header>
  <div id="map"></div>
  <div id="close-button" class="hidden">&times;</div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    const map = L.map('map', {
      zoomControl: false,
      attributionControl: false
    });

    const VN_CENTER = [16.0, 107.5];
    let allProvincesLayer = null;
    let detailedLayer = null;
    const closeButton = document.getElementById('close-button');

    map.setView(VN_CENTER, 6);

    const vintageColors = [
        '#D2B48C', '#A0522D', '#8B4513', '#BC8F8F', '#F5DEB3', '#6B8E23', '#708090', '#BDB76B', '#CD853F', '#D8BFD8', '#556B2F', '#9370DB', '#F0E68C', '#C0C0C0', '#8FBC8F'
    ];
    let colorIndex = 0;

    function getNextVintageColor() {
        const color = vintageColors[colorIndex];
        colorIndex = (colorIndex + 1) % vintageColors.length;
        return color;
    }

    const defaultStyle = {
        weight: 1,
        color: '#444',
        fillOpacity: 0.75,
    };

    const highlightStyle = {
        weight: 2.5,
        color: '#000',
        fillOpacity: 0.9,
    };

    const onEachFeature = (feature, layer) => {
      const name = feature.properties.ten_tinh || "Kh√¥ng r√µ";
      let label = null;
      let timeoutId = null;

      layer.on('mouseover', function (e) {
        layer.setStyle(highlightStyle);
        if (timeoutId) clearTimeout(timeoutId);

        const center = layer.getBounds().getCenter();
        if (!label) {
            label = L.marker(center, {
                icon: L.divIcon({ className: 'province-label', html: name }),
                interactive: false
            }).addTo(map);
        }
        setTimeout(() => { if (label) label.getElement().classList.add('province-label-visible'); }, 10);
      });

      layer.on('mouseout', function (e) {
        layer.setStyle({...defaultStyle, fillColor: layer.options.fillColor});
        if (label) {
          label.getElement().classList.remove('province-label-visible');
          timeoutId = setTimeout(() => { if (label) { map.removeLayer(label); label = null; } }, 200);
        }
      });
    };

    const onEachFeatureDetail = (feature, layer) => {
        const name = feature.properties.ten_xa || "Kh√¥ng r√µ";
        let label = null;
        let timeoutId = null;

        layer.on('mouseover', function (e) {
            layer.setStyle(highlightStyle);
            if (timeoutId) clearTimeout(timeoutId);

            const center = layer.getBounds().getCenter();
            if (!label) {
                label = L.marker(center, {
                    icon: L.divIcon({ className: 'province-label', html: name }),
                    interactive: false
                }).addTo(map);
            }
            setTimeout(() => { if (label) label.getElement().classList.add('province-label-visible'); }, 10);
        });

        layer.on('mouseout', function (e) {
            layer.setStyle({...defaultStyle, fillColor: layer.options.fillColor});
            if (label) {
                label.getElement().classList.remove('province-label-visible');
                timeoutId = setTimeout(() => { if (label) { map.removeLayer(label); label = null; } }, 200);
            }
        });
    };

    const provinceFiles = ['provinces_part1.geojson', 'provinces_part2.geojson', 'provinces_part3.geojson', 'provinces_part4.geojson'];

    Promise.all(provinceFiles.map(file => fetch(file).then(res => res.json())))
      .then(allGeoJSONs => {
        const allFeatures = allGeoJSONs.flatMap(geojson => geojson.features);
        const combinedGeoJSON = { type: "FeatureCollection", features: allFeatures };

        allProvincesLayer = L.geoJSON(combinedGeoJSON, {
            style: (feature) => ({
                ...defaultStyle,
                fillColor: getNextVintageColor()
            }),
            onEachFeature: onEachFeature
        });

        // Manually assign and store the color for each layer
        let tempColorIndex = 0;
        allProvincesLayer.eachLayer(layer => {
            const color = vintageColors[tempColorIndex % vintageColors.length];
            layer.setStyle({fillColor: color});
            layer.options.fillColor = color; // Store color for mouseout
            tempColorIndex++;
        });

        allProvincesLayer.addTo(map);
        map.fitBounds(allProvincesLayer.getBounds());
        map.setMaxBounds(allProvincesLayer.getBounds());
      });

    const cities = [
      { name: "H√† N·ªôi", coords: [21.0285, 105.8542], file: "H√† N·ªôi (ph∆∞·ªùng x√£) - 34.geojson" },
      { name: "H·∫£i Ph√≤ng", coords: [20.8449, 106.6881], file: "H·∫£i Ph√≤ng (ph∆∞·ªùng x√£) - 34.geojson" },
      { name: "Thanh H√≥a", coords: [19.8075, 105.7769], file: "Thanh H√≥a (ph∆∞·ªùng x√£) - 34.geojson" }
    ];

    const cityMarkers = [];
    const detailMarkersLayer = L.featureGroup().addTo(map);
    const popupState = {};

    function switchPage(popupId, direction) {
        const state = popupState[popupId];
        if (!state) return;

        const newPage = state.currentPage + direction;
        if (newPage < 1 || newPage > state.totalPages) return;

        const currentPageElement = document.getElementById(`page-${popupId}-${state.currentPage}`);
        if (currentPageElement) currentPageElement.classList.remove('active');

        const newPageElement = document.getElementById(`page-${popupId}-${newPage}`);
        if (newPageElement) newPageElement.classList.add('active');

        state.currentPage = newPage;

        const prevBtn = document.getElementById(`prev-btn-${popupId}`);
        const nextBtn = document.getElementById(`next-btn-${popupId}`);

        if (prevBtn) prevBtn.style.display = newPage === 1 ? 'none' : 'inline-block';
        if (nextBtn) nextBtn.style.display = newPage === state.totalPages ? 'none' : 'inline-block';
    }

    cities.forEach(city => {
      const marker = L.marker(city.coords).addTo(map);
      marker.on('click', () => {
        cityMarkers.forEach(m => map.removeLayer(m));
        if (allProvincesLayer) map.removeLayer(allProvincesLayer);

        fetch(city.file)
          .then(res => res.ok ? res.json() : Promise.reject(res.status))
          .then(geojson => {
            detailedLayer = L.geoJSON(geojson, {
              style: () => ({...defaultStyle, fillColor: getNextVintageColor()}),
              onEachFeature: onEachFeatureDetail
            }).addTo(map);

            map.fitBounds(detailedLayer.getBounds());

            const locationDetails = {
              "Ho√†n Ki·∫øm": {
                pages: [
                  { image: "hangga1.jpg", content: "H√†ng G√†, H√† N·ªôi, n∆°i thu·ªëc l√†o xen l·∫´n lu·ªëng ƒë·∫≠u, mang h∆°i th·ªü c·ªßa th·ªß ƒë√¥ c·ªï k√≠nh. L√° thu·ªëc ƒë∆∞·ª£c tr·ªìng tr√™n ƒë·∫•t H√† N·ªôi, th·∫•m ƒë·∫´m v·ªã ƒë√¥ th·ªã, th√°i s·ª£i d·∫ªo, ·ªß v·ªõi h∆∞∆°ng ƒë·∫•t tr·ªùi ƒë·ªÉ t·∫°o n√™n m·ªôt s·∫£n ph·∫©m ƒë·ªôc ƒë√°o. ƒê√¢y l√† ƒë·∫∑c s·∫£n ph·ªë c·ªï, g·∫Øn v·ªõi nh·ªØng con ng√µ nh·ªè, nh·ªØng c√¢u chuy·ªán ƒë√™m khuya, v√† k√Ω ·ª©c c·ªßa m·ªôt H√† N·ªôi x∆∞a ƒë·∫ßy ho√†i ni·ªám, n∆°i th·ªùi gian nh∆∞ ng·ª´ng tr√¥i." },
                  { image: "hangga2.jpg", content: "M·ªôt h∆°i H√†ng G√† nh∆∞ b∆∞·ªõc ch√¢n v√†o con ng√µ r√™u phong c·ªßa H√† N·ªôi. Kh√≥i √™m √°i, v·ªã ng·ªçt h·∫≠u nh∆∞ h·∫°t ƒë·∫≠u rang, th∆°m l·ª´ng nh∆∞ kh√≥i than t·ª´ b·∫øp c·ªßi ng√†y x∆∞a. Kh√¥ng qu√° m·∫°nh, nh∆∞ng ƒë·ªß say ƒë·∫Øm, n√≥ g·ª£i nh·ªõ ti·∫øng rao ƒë√™m, √°nh ƒë√®n v√†ng, v√† nh·ªãp s·ªëng ch·∫≠m r√£i c·ªßa m·ªôt th·ªùi ƒë√£ xa. ƒê√¢y l√† lo·∫°i thu·ªëc d√†nh cho nh·ªØng ai mu·ªën t√¨m ch√∫t b√¨nh y√™n gi·ªØa l√≤ng ƒë√¥ th·ªã t·∫•p n·∫≠p." },
                  { image: "hangga3.jpg", content: "H√†ng G√† l√† m√≥n qu√† d√†nh cho nh·ªØng t√¢m h·ªìn ho√†i c·ªï, nh·ªØng ng∆∞·ªùi mu·ªën t√¨m l·∫°i k√Ω ·ª©c H√† N·ªôi trong t·ª´ng l√†n kh√≥i. N√≥ l√† c·∫ßu n·ªëi gi·ªØa qu√° kh·ª© v√† hi·ªán t·∫°i, mang ƒë·∫øn s·ª± th∆∞ th√°i, nh∆∞ m·ªôt t√°ch tr√† n√≥ng trong chi·ªÅu ƒë√¥ng gi√° l·∫°nh." }
                ]
              },
              "Vƒ©nh B·∫£o": {
                pages: [
                  { image: "vinhbao1.jpg", content: "Vƒ©nh B·∫£o, H·∫£i Ph√≤ng, n∆°i d√≤ng s√¥ng H·ªìng b·ªìi ƒë·∫Øp ph√π sa tr√π ph√∫, l√† qu√™ h∆∞∆°ng c·ªßa thu·ªëc l√†o t·ª´ h√†ng trƒÉm nƒÉm. L√° thu·ªëc ƒë∆∞·ª£c h√°i v√†o nh·ªØng ng√†y th√°ng 4-5 √¢m l·ªãch, khi n·∫Øng gi√≥ l√†m l√° d√†y c·ªôm, ch√≠n v√†ng r·ª±c r·ª°. Ng∆∞·ªùi d√¢n ·ªß thu·ªëc trong h·∫ßm ƒë·∫•t k√≠n, th√°i s·ª£i l·ªõn, ph∆°i n·∫Øng tho√°ng ƒë·ªÉ gi·ªØ m√†u n√¢u c√°nh gi√°n √≥ng √°nh nh∆∞ vi√™n ng·ªçc qu√Ω. ƒê√¢y l√† thu·ªëc l√†o c·ªßa s·ª± g·∫Øn k·∫øt, c·ªßa nh·ªØng bu·ªïi chi·ªÅu b√™n b·ªù s√¥ng, n∆°i b·∫°n b√® qu√¢y qu·∫ßn, ti·∫øng c∆∞·ªùi vang v·ªçng h√≤a c√πng ti·∫øng n∆∞·ªõc ch·∫£y" },
                  { image: "vinhbao2.jpg", content: "H√∫t Vƒ©nh B·∫£o, b·∫°n nh∆∞ ƒë·ª©ng gi·ªØa d√≤ng s√¥ng H·ªìng, c·∫£m nh·∫≠n v·ªã cay n·ªìng nh∆∞ ng·ªçn l·ª≠a ƒë·∫ßu ti√™n, r·ªìi ng·ªçt ng√†o nh∆∞ v√≤ng tay m·∫π √¥m l·∫•y t√¢m h·ªìn. Kh√≥i m·ªãn m√†ng, s·∫£ng kho√°i, nh∆∞ m·ªôt b·∫£n h√≤a ca c·ªßa ƒë·∫•t tr·ªùi, g·ª£i nh·ªõ nh·ªØng ng√†y qu√™ ƒë·∫ßy ·∫Øp y√™u th∆∞∆°ng. M·ªói h∆°i kh√≥i l√† m·ªôt l·ªùi nh·∫Øc nh·ªü v·ªÅ s·ª± tr√π ph√∫ c·ªßa qu√™ h∆∞∆°ng, v·ªÅ nh·ªØng kho·∫£nh kh·∫Øc gi·∫£n d·ªã nh∆∞ng ƒëong ƒë·∫ßy √Ω nghƒ©a b√™n nh·ªØng ng∆∞·ªùi th√¢n y√™u." },
                  { image: "vinhbao3.jpg", content: "Vƒ©nh B·∫£o l√† ng∆∞·ªùi b·∫°n ƒë·ªìng h√†nh c·ªßa nh·ªØng t√¢m h·ªìn y√™u ƒë·ªùi. N√≥ mang ƒë·∫øn h∆°i ·∫•m c·ªßa l√†ng qu√™, bi·∫øn m·ªói h∆°i kh√≥i th√†nh m·ªôt c√¢u chuy·ªán s·∫ª chia. ƒê√¢y l√† l·ª±a ch·ªçn ho√†n h·∫£o cho nh·ªØng bu·ªïi t·ª• h·ªçp hay nh·ªØng ph√∫t gi√¢y b·∫°n mu·ªën t√¨m l·∫°i ch√≠nh m√¨nh gi·ªØa nh·ªãp s·ªëng v·ªôi v√£." }
                ]
              },
              "Ti√™n L√£ng": {
                pages: [
                  { image: "tienlang1.jpg", content: "Ti√™n L√£ng, H·∫£i Ph√≤ng, n∆°i sinh ra ‚Äúthu·ªëc l√†o ti·∫øn vua‚Äù t·ª´ th·ªùi ch√∫a Tr·ªãnh, l√† bi·ªÉu t∆∞·ª£ng c·ªßa s·ª± tinh hoa. Ch·ªâ tr·ªìng tr√™n nh·ªØng ‚Äúru·ªông Ch√πa‚Äù thi√™ng li√™ng ·ªü l√†ng An T·ª≠ H·∫°, l√° thu·ªëc ƒë∆∞·ª£c ch·ªçn l·ªçc k·ªπ c√†ng, h√°i khi ch√≠n gi√†, th√°i s·ª£i nh·ªè nh∆∞ t∆°, ·ªß theo b√≠ quy·∫øt gia truy·ªÅn ƒë·ªÉ t·∫°o n√™n h∆∞∆°ng th∆°m kh√¥ng n∆°i n√†o s√°nh ƒë∆∞·ª£c. V·ªõi m√†u n√¢u v√†ng √≥ng √°nh v√† h√†m l∆∞·ª£ng nicotin v·ª´a ph·∫£i, Ti√™n L√£ng t·ª´ng l√† m√≥n qu√† d√¢ng l√™n cung ƒë√¨nh, nay l√† ni·ªÅm t·ª± h√†o ƒë∆∞·ª£c c·∫£ th·∫ø gi·ªõi bi·∫øt ƒë·∫øn." },
                  { image: "tienlang2.jpg", content: "H√∫t Ti√™n L√£ng, b·∫°n nh∆∞ ch·∫°m v√†o m·ªôt vi√™n ng·ªçc qu√Ω c·ªßa l·ªãch s·ª≠. Kh√≥i √™m √°i, m∆∞·ª£t m√† nh∆∞ l·ª•a, mang v·ªã ng·ªçt thanh k√©o d√†i, nh∆∞ nh·∫•p m·ªôt ly r∆∞·ª£u qu√Ω trong √°nh ho√†ng h√¥n. H∆∞∆°ng th∆°m lan t·ªèa, khi·∫øn t√¢m h·ªìn l√¢ng l√¢ng, nh∆∞ bay gi·ªØa nh·ªØng t·∫ßng m√¢y c·ªßa m·ªôt th·ªùi v√†ng son. M·ªói h∆°i thu·ªëc l√† m·ªôt h√†nh tr√¨nh tr·ªü v·ªÅ v·ªõi s·ª± ki√™u h√£nh c·ªßa d√¢n t·ªôc, l√† l·ªùi nh·∫Øc nh·ªü v·ªÅ nh·ªØng gi√° tr·ªã b·∫•t bi·∫øn." },
                  { image: "tienlang3.jpg", content: "Ti√™n L√£ng l√† l·ª±a ch·ªçn c·ªßa nh·ªØng t√¢m h·ªìn tinh t·∫ø, nh·ªØng ng∆∞·ªùi khao kh√°t m·ªôt tr·∫£i nghi·ªám ƒë·∫≥ng c·∫•p. N√≥ kh√¥ng ch·ªâ l√† thu·ªëc l√†o, m√† l√† m·ªôt di s·∫£n vƒÉn h√≥a, m·ªôt m√≥n qu√† t·ª´ qu√° kh·ª© ƒë·ªÉ b·∫°n tr√¢n qu√Ω h√¥m nay v√† truy·ªÅn c·∫£m h·ª©ng cho mai sau." }
                ]
              },
              "Qu·∫£ng X∆∞∆°ng": {
                pages: [
                  { image: "quangxuong1.jpg", content: "Qu·∫£ng X∆∞∆°ng, Thanh H√≥a, n∆°i n·∫Øng gi√≥ mi·ªÅn Trung kh·∫Øc nghi·ªát t√¥i luy·ªán n√™n nh·ªØng l√° thu·ªëc d√†y, ƒë·∫≠m ch·∫•t. L√° ƒë∆∞·ª£c h√°i v√†o cu·ªëi th√°ng 4 √¢m l·ªãch, khi n·∫Øng ch√°y l√†m l√° ch√≠n v√†ng, th√°i s·ª£i d√†i dai, ph∆°i ƒë·ªß n·∫Øng ƒë·ªÉ gi·ªØ ƒë·ªô ƒë·∫≠m. ƒê√¢y l√† thu·ªëc l√†o c·ªßa s·ª± ki√™n c∆∞·ªùng, c·ªßa nh·ªØng ng∆∞·ªùi n√¥ng d√¢n ƒë·ªëi m·∫∑t v·ªõi ƒë·∫•t tr·ªùi ƒë·ªÉ t·∫°o ra m·ªôt s·∫£n ph·∫©m ƒë·∫ßy c√° t√≠nh, ƒë∆∞·ª£c y√™u th√≠ch kh·∫Øp B·∫Øc Trung B·ªô, nh∆∞ m·ªôt bi·ªÉu t∆∞·ª£ng c·ªßa s·ª©c m·∫°nh b·∫•t khu·∫•t." },
                  { image: "quangxuong2.jpg", content: "Qu·∫£ng X∆∞∆°ng l√† m·ªôt c∆°n s√≥ng bi·ªÉn d·ªØ d·ªôi, cu·ªën b·∫°n v√†o m·ªôt h√†nh tr√¨nh c·∫£m x√∫c m√£nh li·ªát. Kh√≥i cay n·ªìng, b√πng n·ªï nh∆∞ ng·ªçn l·ª≠a, ƒë√°nh th·ª©c m·ªçi gi√°c quan, r·ªìi ƒë·ªÉ l·∫°i h·∫≠u v·ªã ch√°t nh·∫π nh∆∞ l·ªùi th√¨ th·∫ßm v·ªÅ s·ª± m·∫°nh m·∫Ω c·ªßa cu·ªôc ƒë·ªùi. H√∫t xong, b·∫°n nh∆∞ v·ª´a chinh ph·ª•c m·ªôt ng·ªçn n√∫i, l√≤ng tr√†n ƒë·∫ßy ph·∫•n kh√≠ch v√† t·ª± h√†o, s·∫µn s√†ng ƒë·ªëi m·∫∑t v·ªõi m·ªçi th·ª≠ th√°ch." },
                  { image: "quangxuong3.jpg", content: "T·∫°i sao b·∫°n s·∫Ω y√™u: N·∫øu b·∫°n mu·ªën c·∫£m nh·∫≠n s·ª©c m·∫°nh c·ªßa ƒë·∫•t tr·ªùi mi·ªÅn Trung, Qu·∫£ng X∆∞∆°ng l√† l·ª±a ch·ªçn kh√¥ng th·ªÉ b·ªè qua. N√≥ l√† l·ªùi tuy√™n ng√¥n d√†nh cho nh·ªØng t√¢m h·ªìn d√°m s·ªëng, d√°m th·ª≠ th√°ch, v√† d√°m y√™u. M·ªói h∆°i kh√≥i l√† m·ªôt l·∫ßn b·∫°n kh·∫≥ng ƒë·ªãnh b·∫£n th√¢n, nh∆∞ ng·ªçn s√≥ng v·ªó v√†o b·ªù ƒë√°, b·∫•t khu·∫•t v√† ki√™u h√£nh." }
                ]
              },
              "Nga S∆°n": {
                pages: [
                  { image: "ngason1.jpg", content: "Nga S∆°n, Thanh H√≥a, n∆°i ƒë·∫•t bazan m√†u m·ª° v√† truy·ªÅn th·ªëng tr·ªìng thu·ªëc t·ª´ th·ªùi kh√°ng chi·∫øn. L√° ƒë∆∞·ª£c h√°i khi v·ª´a b√°nh t·∫ª, ·ªß se, ph∆°i n·∫Øng nh·∫π ƒë·ªÉ gi·ªØ ƒë·ªô d·ªãu d√†ng. ƒê√¢y l√† ‚Äúth·ª©c qu√† qu√Ω‚Äù c·ªßa x·ª© Thanh, mang s·ª± c√¢n b·∫±ng ho√†n h·∫£o, t·ª´ng ƒë∆∞·ª£c xu·∫•t kh·∫©u nh∆∞ m·ªôt bi·ªÉu t∆∞·ª£ng c·ªßa ni·ªÅm t·ª± h√†o d√¢n t·ªôc." },
                  { image: "ngason2.jpg", content: "Nga S∆°n l√† m·ªôt l·ªùi ru √™m √°i, kh√≥i m∆∞·ª£t m√† nh∆∞ l·ª•a, v·ªã ng·ªçt thanh nh∆∞ n∆∞·ªõc su·ªëi ngu·ªìn, lan t·ªèa s·ª± ·∫•m √°p t·ª´ ng·ª±c ƒë·∫øn t·∫≠n tr√°i tim. H√∫t xong, l√≤ng b·∫°n nh·∫π nh√†ng, nh∆∞ ƒë∆∞·ª£c √¥m ·∫•p b·ªüi ƒëi·ªáu h√≤ qu√™ h∆∞∆°ng, nh∆∞ tr·ªü v·ªÅ v√≤ng tay m·∫π nh·ªØng ng√†y th∆° b√©. ƒê√¢y l√† lo·∫°i thu·ªëc d√†nh cho nh·ªØng bu·ªïi chi·ªÅu m∆∞a, khi b·∫°n c·∫ßn m·ªôt ng∆∞·ªùi b·∫°n th·∫ßm l·∫∑ng ƒë·ªÉ s·∫ª chia." },
                  { image: "ngason3.jpg", content: "T·∫°i sao b·∫°n s·∫Ω y√™u: Nga S∆°n l√† li·ªÅu thu·ªëc cho t√¢m h·ªìn, l√† l·ª±a ch·ªçn cho nh·ªØng kho·∫£nh kh·∫Øc c·∫ßn s·ª± an y√™n. N√≥ mang b·∫°n v·ªÅ v·ªõi qu√™ nh√†, n∆°i m·ªçi mu·ªôn phi·ªÅn tan bi·∫øn, ch·ªâ c√≤n l·∫°i s·ª± thanh th·∫£n v√† t√¨nh y√™u th∆∞∆°ng." }
                ]
              },
              "Ho·∫±ng H√≥a": {
                pages: [
                  { image: "hoanghoa1.jpg", content: "Ho·∫±ng H√≥a, Thanh H√≥a, n∆°i bi·ªÉn v√† s√¥ng M√£ h√≤a quy·ªán, t·∫°o n√™n l√° thu·ªëc ƒë·∫≠m ƒë√† t·ª´ th·∫ø k·ª∑ 19. L√° d√†y, th√°i l·ªõn, ·ªß l√¢u ƒë·ªÉ tƒÉng ƒë·ªô n·ªìng, l√† lo·∫°i thu·ªëc ‚Äún·∫∑ng‚Äù nh·∫•t x·ª© Thanh. ƒê√¢y l√† s·∫£n ph·∫©m c·ªßa ng∆∞ d√¢n v√† n√¥ng d√¢n, g·∫Øn v·ªõi l·ªÖ h·ªôi l√†ng, mang tinh th·∫ßn ki√™n c∆∞·ªùng c·ªßa mi·ªÅn bi·ªÉn, nh∆∞ nh·ªØng con thuy·ªÅn v∆∞·ª£t qua gi√¥ng b√£o." },
                  { image: "hoanghoa2.jpg", content: "H√∫t Ho·∫±ng H√≥a, b·∫°n nh∆∞ ƒë·ª©ng tr∆∞·ªõc ƒë·∫°i d∆∞∆°ng m√™nh m√¥ng. Kh√≥i n·ªìng, ƒë·∫≠m, m·∫∑n ng·ªçt nh∆∞ v·ªã bi·ªÉn, ph√™ l√¢u m√† kh√¥ng kh√© h·ªçng. M·ªói h∆°i l√† m·ªôt c∆°n s√≥ng, ƒë√°nh th·ª©c s·ª©c s·ªëng m√£nh li·ªát trong b·∫°n, nh∆∞ ti·∫øng g·ªçi c·ªßa nh·ªØng con thuy·ªÅn ra kh∆°i. ƒê√¢y l√† lo·∫°i thu·ªëc d√†nh cho nh·ªØng ai y√™u s·ª± d·ªØ d·ªôi, mu·ªën kh√°m ph√° b·∫£n th√¢n qua t·ª´ng l√†n kh√≥i." },
                  { image: "hoanghoa3.jpg", content: "Ho·∫±ng H√≥a l√† l·ªùi tuy√™n ng√¥n c·ªßa s·ª± m·∫°nh m·∫Ω. N√≥ d√†nh cho nh·ªØng t√¢m h·ªìn khao kh√°t t·ª± do, mu·ªën c·∫£m nh·∫≠n s·ª©c s·ªëng m√£nh li·ªát c·ªßa mi·ªÅn bi·ªÉn. M·ªói h∆°i kh√≥i l√† m·ªôt l·∫ßn b·∫°n kh·∫≥ng ƒë·ªãnh m√¨nh, nh∆∞ con s√≥ng v·ªó v√†o b·ªù, ki√™u h√£nh v√† b·∫•t khu·∫•t." }
                ]
              }
            };

            const createPopupContent = (details, popupId) => {
              const totalPages = details.pages.length;
              popupState[popupId] = { currentPage: 1, totalPages: totalPages };

              let content = `<div style="width: 200px;">`;

              for (let i = 0; i < totalPages; i++) {
                const page = details.pages[i];
                content += `<div id="page-${popupId}-${i+1}" class="popup-page ${i === 0 ? 'active' : ''}">
                              <img src="${page.image}" alt="H√¨nh ·∫£nh" style="width:100%; height:auto; border-radius: 4px;">
                              <p style="margin-top: 10px;">${page.content}</p>
                            </div>`;
              }

              content += `<div style="text-align: center; margin-top: 10px;">
                            <button id="prev-btn-${popupId}" onclick="switchPage('${popupId}', -1)" style="display: none;">&lt;</button>
                            <button id="next-btn-${popupId}" onclick="switchPage('${popupId}', 1)">&gt;</button>
                          </div>`;
              content += `</div>`;
              return content;
            };

            if (city.name === "H√† N·ªôi") {
                const details = locationDetails["Ho√†n Ki·∫øm"];
                const popupContent = createPopupContent(details, "HoanKiem");
                L.marker([21.0285, 105.8542]).bindPopup(popupContent).addTo(detailMarkersLayer);
            } else if (city.name === "H·∫£i Ph√≤ng") {
                let details = locationDetails["Vƒ©nh B·∫£o"];
                let popupContent = createPopupContent(details, "VinhBao");
                L.marker([20.689, 106.479]).bindPopup(popupContent).addTo(detailMarkersLayer);

                details = locationDetails["Ti√™n L√£ng"];
                popupContent = createPopupContent(details, "TienLang");
                L.marker([20.731, 106.560]).bindPopup(popupContent).addTo(detailMarkersLayer);
            } else if (city.name === "Thanh H√≥a") {
                let details = locationDetails["Qu·∫£ng X∆∞∆°ng"];
                let popupContent = createPopupContent(details, "QuangXuong");
                L.marker([19.681, 105.800]).bindPopup(popupContent).addTo(detailMarkersLayer);

                details = locationDetails["Nga S∆°n"];
                popupContent = createPopupContent(details, "NgaSon");
                L.marker([19.983, 105.967]).bindPopup(popupContent).addTo(detailMarkersLayer);

                details = locationDetails["Ho·∫±ng H√≥a"];
                popupContent = createPopupContent(details, "HoangHoa");
                L.marker([19.85, 105.86]).bindPopup(popupContent).addTo(detailMarkersLayer);
            }
          })
          .catch(e => console.error("L·ªói t·∫£i b·∫£n ƒë·ªì chi ti·∫øt:", e));

        closeButton.classList.remove('hidden');
      });
      cityMarkers.push(marker);
    });

    closeButton.addEventListener('click', () => {
      detailMarkersLayer.clearLayers();
      if (detailedLayer) map.removeLayer(detailedLayer);
      detailedLayer = null;

      cityMarkers.forEach(m => m.addTo(map));
      if (allProvincesLayer) allProvincesLayer.addTo(map);
      
      map.fitBounds(allProvincesLayer.getBounds());
      map.setMaxBounds(allProvincesLayer.getBounds());
      closeButton.classList.add('hidden');
    });
    Promise.all(provinceFiles.map(file => fetch(file).then(res => res.json())))
  .then(allGeoJSONs => {
    // ... ph·∫ßn code hi·ªán c√≥ c·ªßa b·∫°n ƒë·ªÉ v·∫Ω b·∫£n ƒë·ªì

    allProvincesLayer.addTo(map);
    map.fitBounds(allProvincesLayer.getBounds());
    map.setMaxBounds(allProvincesLayer.getBounds());

    // ‚úÖ Khi b·∫£n ƒë·ªì ƒë√£ load xong ‚Üí ·∫©n loading screen
    const loading = document.getElementById('loading-screen');
    setTimeout(() => {
      loading.classList.add('hidden');
    }, 500); // ch·ªù 0.5 gi√¢y cho m∆∞·ª£t
  })
  .catch(err => {
    console.error("L·ªói t·∫£i b·∫£n ƒë·ªì:", err);
    alert("Kh√¥ng th·ªÉ t·∫£i b·∫£n ƒë·ªì. Vui l√≤ng th·ª≠ l·∫°i!");
    document.getElementById('loading-screen').classList.add('hidden');
  });
  </script>
</body>
</html>
